(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aafdf94"],{7197:function(t,e,a){},"99af":function(t,e,a){"use strict";var i=a("23e7"),o=a("d039"),r=a("e8b5"),n=a("861d"),s=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),u=a("1dde"),h=a("b622"),f=a("2d00"),p=h("isConcatSpreadable"),b=9007199254740991,_="Maximum allowed index exceeded",m=f>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=u("concat"),T=function(t){if(!n(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},C=!m||!g;i({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,i,o,r,n=s(this),u=d(n,0),h=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?n:arguments[e],T(r)){if(o=c(r.length),h+o>b)throw TypeError(_);for(a=0;a<o;a++,h++)a in r&&l(u,h,r[a])}else{if(h>=b)throw TypeError(_);l(u,h++,r)}return u.length=h,u}})},a842:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order__additional"},[t.getRates?a("div",{staticClass:"additional__container"},[a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Цвет")]),a("el-radio-group",{attrs:{value:t.radioColorsSelected||t.getCar.colors[0]}},t._l(t.getCar.colors,(function(e){return a("el-radio",{key:e,attrs:{label:e},on:{change:function(a){return t.setStoreColor(e)}}})})),1)],1),a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Дата аренды")]),a("div",{staticClass:"additional__date_container"},[a("p",{staticClass:"additional__date_label"},[t._v("C")]),a("el-date-picker",{attrs:{"picker-options":t.optionsDateFrom,type:"datetime",editable:"",clearable:!0,"clear-icon":"form__clear",format:"dd-MM-yyyy HH:mm",placeholder:"Введите дату и время"},on:{change:t.setStoreDateFrom},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("div",{staticClass:"additional__date_container"},[a("p",{staticClass:"additional__date_label"},[t._v("По")]),a("el-date-picker",{attrs:{"picker-options":t.optionsDateTo,type:"datetime",editable:"",clearable:!0,"clear-icon":"form__clear",format:"dd-MM-yyyy HH:mm",placeholder:"Введите дату и время"},on:{change:t.setStoreDateTo},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)]),a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Тариф")]),a("el-radio-group",{model:{value:t.radioRateSelected,callback:function(e){t.radioRateSelected=e},expression:"radioRateSelected"}},t._l(t.getRates,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.rateTypeId.name},on:{change:function(a){return t.setStoreRate(e)}}},[t._v(t._s(t.rateRadioLabel(e)))])})),1)],1),a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Доп услуги")]),a("el-checkbox-group",{staticClass:"additional__checkbox",attrs:{"text-color":"#ffffff"},model:{value:t.addOptions,callback:function(e){t.addOptions=e},expression:"addOptions"}},t._l(t.getOptions,(function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.name},on:{change:function(e){return t.setStoreOptions()}}},[t._v(t._s(t.optionCheckboxLabel(e)))])})),1)],1)]):t._e()])},o=[],r=a("5530"),n=(a("99af"),a("b0c0"),a("4de4"),a("2f62")),s={name:"Additional",data:function(){var t=this;return{radioColorsSelected:"",addOptions:[],radioRateSelected:"",dateTo:"",dateFrom:"",optionsDateFrom:{disabledDate:function(t){return t<(new Date).setHours(0,0,0,0)}},optionsDateTo:{disabledDate:function(e){return e<t.dateFrom}}}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["c"])("model",["getCar"])),Object(n["c"])("additional",["getRates","getOptions","getRate","getPrice","getRentDuration","isPriceValid"])),{},{rateTotal:{get:function(){return this.getPrice},set:function(t){this.setPrice(t)}},rentDuration:{get:function(){return this.getRentDuration},set:function(t){this.setRentDuration(t)}}}),mounted:function(){this.fetchRates()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["b"])("additional",["setPrice","fetchRates","setDateTo","setDateFrom","setColor"])),Object(n["d"])("additional",["setRentDuration","setOption","setRate","setPriceValid"])),{},{setStoreDateTo:function(){this.dateTo||(this.rentDuration=null,this.rateTotal=null),this.setDateTo(this.dateTo),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},setStoreDateFrom:function(){this.dateFrom||(this.rentDuration=null,this.rateTotal=null),this.setDateFrom(this.dateFrom),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},setStoreOptions:function(){this.setOption(this.addOptions),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},setStoreColor:function(t){this.radioColorsSelected=t,this.setColor(t)},setStoreRate:function(t){this.setRate(t),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},rateRadioLabel:function(t){return"".concat(t.rateTypeId.name,", ").concat(t.price," ₽/").concat(t.rateTypeId.unit)},optionCheckboxLabel:function(t){return"".concat(t.name,",").concat(t.price,"₽")},calculateRent:function(){var t=0;if(this.getOptions.filter((function(e){!0===e.optValue&&(t+=e.price)})),""!==this.dateFrom&&""!==this.dateTo){var e=this.dateTo-this.dateFrom;if(e<0)this.rateTotal=null,this.rentDuration=null;else switch(this.getRate.rateTypeId.unit){case"сутки":var a=Math.floor(e/1e3/60/60/24);if(0===a&&(a=1),this.rentDuration={units:a,name:"д"},this.rateTotal=a*this.getRate.price+t,this.getCar.priceMin<=this.rateTotal&&this.rateTotal<=this.getCar.priceMax){this.setPriceValid(!0);break}this.setPriceValid(!1);break;case"7 дней":var i=Math.ceil(e/1e3/60/60/24/7);if(this.rentDuration={units:i,name:"нед"},this.rateTotal=i*this.getRate.price+t,this.getCar.priceMin<=this.rateTotal&&this.rateTotal<=this.getCar.priceMax){this.setPriceValid(!0);break}this.setPriceValid(!1);break;case"мин":var o=Math.floor(e/1e3/60);if(this.rentDuration={units:o,name:"мин"},this.rateTotal=o*this.getRate.price+t,this.getCar.priceMin<=this.rateTotal&&this.rateTotal<=this.getCar.priceMax){this.setPriceValid(!0);break}this.setPriceValid(!1);break}}}})},c=s,l=(a("f9ce"),a("2877")),d=Object(l["a"])(c,i,o,!1,null,null,null);e["default"]=d.exports},f9ce:function(t,e,a){"use strict";a("7197")}}]);
//# sourceMappingURL=chunk-2aafdf94.122881fe.js.map