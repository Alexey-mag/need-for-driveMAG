(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-504c9ad4","chunk-2aafdf94","chunk-44e61bfc","chunk-971fda38"],{1364:function(t,e,a){"use strict";a("3fb9")},"35aa":function(t,e,a){},"3fb9":function(t,e,a){},4360:function(t,e,a){"use strict";a("5669")},"465f":function(t,e,a){"use strict";a("53ce")},"53ce":function(t,e,a){},5669:function(t,e,a){},7197:function(t,e,a){},"83f7":function(t,e,a){},9925:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.getCars?a("div",{staticClass:"order__model"},[a("div",{staticClass:"model__car_class_switch"},[a("el-radio-group",{attrs:{"text-color":"#FFFFFF"},model:{value:t.radioSelected,callback:function(e){t.radioSelected=e},expression:"radioSelected"}},t._l(t.getCarCategory,(function(t){return a("el-radio",{key:t,attrs:{label:t}})})),1)],1),a("div",{staticClass:"model__container"},t._l(t.filteredCars,(function(e){return a("div",{key:e.id,staticClass:"model__car_card",on:{click:function(a){return t.selectCar(e)}}},[a("div",{staticClass:"model__car_name"},[t._v(" "+t._s(t.getCarName(e))+" ")]),a("div",{staticClass:"model__car_cost"},[t._v(" "+t._s(e.priceMin)+" - "+t._s(e.priceMax)+" ₽ ")]),a("img",{staticClass:"model__car_image",attrs:{src:t.imgPath(e),alt:""},on:{error:t.defaultImage}})])})),0),a("div",{staticClass:"model__loading"},[t.loading?a("loader"):t._e()],1)]):t._e()},s=[],r=a("5530"),o=(a("4de4"),a("b0c0"),a("99af"),a("1276"),a("ac1f"),a("2f62")),n=a("555f"),c={name:"Model",components:{Loader:n["a"]},data:function(){return{radioSelected:""}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])("model",["getCars","getCarCategory","getCar"])),Object(o["c"])("shared",["loading"])),{},{filteredCars:function(){var t=this;return"Все модели"===this.radioSelected||""===this.radioSelected?this.getCars:this.getCars.filter((function(e){if(e.categoryId.name===t.radioSelected)return e}))}}),mounted:function(){this.fetchModels()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["b"])("model",["fetchModels","setCar"])),Object(o["d"])("additional",["setColor"])),{},{imgPath:function(t){return"".concat("https://api-factory.simbirsoft1.com").concat(t.thumbnail.path)},getCarName:function(t){return t.name.toUpperCase().split(",")[1]?t.name.toUpperCase().split(",")[1]:t.name},selectCar:function(t){console.log(this.$route),this.setColor("Любой"),this.setCar(t)},defaultImage:function(t){t.target.src="/images/default-car.jpg"}})},l=c,d=(a("4360"),a("2877")),_=Object(d["a"])(l,i,s,!1,null,null,null);e["default"]=_.exports},"99af":function(t,e,a){"use strict";var i=a("23e7"),s=a("d039"),r=a("e8b5"),o=a("861d"),n=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),_=a("1dde"),u=a("b622"),p=a("2d00"),m=u("isConcatSpreadable"),h=9007199254740991,f="Maximum allowed index exceeded",C=p>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),b=_("concat"),g=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},v=!C||!b;i({target:"Array",proto:!0,forced:v},{concat:function(t){var e,a,i,s,r,o=n(this),_=d(o,0),u=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?o:arguments[e],g(r)){if(s=c(r.length),u+s>h)throw TypeError(f);for(a=0;a<s;a++,u++)a in r&&l(_,u,r[a])}else{if(u>=h)throw TypeError(f);l(_,u++,r)}return _.length=u,_}})},"9bec":function(t,e,a){"use strict";a("83f7")},a63c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order__total"},[t.getConfirmedOrder?a("div",{staticClass:"total__container"},[a("div",{staticClass:"total__info"},[a("p",{staticClass:"total__info_title"},[t._v("Ваш заказ подтвержден")]),a("p",{staticClass:"total__car_name"},[t._v(t._s(t.getConfirmedOrder.carId.name))]),t.getOrder.carId.number?a("p",{staticClass:"total__car_number"},[t._v(t._s(t.getConfirmedOrder.carId.number))]):t._e(),t.getConfirmedOrder.isFullTank?a("p",{staticClass:"total__option"},[a("b",[t._v("Топливо ")]),t._v("100% ")]):t._e(),t.getConfirmedOrder.isNeedChildChair?a("p",{staticClass:"total__option"},[a("b",[t._v("Детское кресло")])]):t._e(),t.getConfirmedOrder.isRightWheel?a("p",{staticClass:"total__option"},[a("b",[t._v("Правый руль")])]):t._e(),a("p",{staticClass:"total__option"},[a("b",[t._v("Доступна с ")]),t._v(t._s(new Date(t.getConfirmedOrder.dateFrom).toLocaleString())+" ")])]),a("img",{staticClass:"total__img",attrs:{alt:"",src:t.imgPath(t.getConfirmedOrder)},on:{error:t.defaultImage}})]):a("div",{staticClass:"total__container"},[a("div",{staticClass:"total__info"},[a("p",{staticClass:"total__car_name"},[t._v(t._s(t.getOrder.carId.name))]),t.getOrder.carId.number?a("p",{staticClass:"total__car_number"},[t._v(t._s(t.getOrder.carId.number))]):t._e(),t.getOrder.isFullTank?a("p",{staticClass:"total__option"},[a("b",[t._v("Топливо ")]),t._v("100% ")]):t._e(),t.getOrder.isNeedChildChair?a("p",{staticClass:"total__option"},[a("b",[t._v("Детское кресло")])]):t._e(),t.getOrder.isRightWheel?a("p",{staticClass:"total__option"},[a("b",[t._v("Правый руль")])]):t._e(),a("p",{staticClass:"total__option"},[a("b",[t._v("Доступна с ")]),t._v(t._s(new Date(t.getOrder.dateFrom).toLocaleString())+" ")])]),a("img",{staticClass:"total__img",attrs:{alt:"",src:t.imgPath(t.getOrder)},on:{error:t.defaultImage}})])])},s=[],r=a("5530"),o=(a("99af"),a("2f62")),n={name:"Total",computed:Object(r["a"])({},Object(o["c"])("total",["getOrder","getConfirmedOrder"])),methods:{imgPath:function(t){return"".concat("https://api-factory.simbirsoft1.com").concat(t.carId.thumbnail.path)},defaultImage:function(t){t.target.src="/images/default-car.jpg"}}},c=n,l=(a("9bec"),a("2877")),d=Object(l["a"])(c,i,s,!1,null,null,null);e["default"]=d.exports},a842:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order__additional"},[t.getRates?a("div",{staticClass:"additional__container"},[a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Цвет")]),a("el-radio-group",{attrs:{value:t.radioColorsSelected||t.getCar.colors[0]}},t._l(t.getCar.colors,(function(e){return a("el-radio",{key:e,attrs:{label:e},on:{change:function(a){return t.setStoreColor(e)}}})})),1)],1),a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Дата аренды")]),a("div",{staticClass:"additional__date_container"},[a("p",{staticClass:"additional__date_label"},[t._v("C")]),a("el-date-picker",{attrs:{"picker-options":t.optionsDateFrom,type:"datetime",editable:"",clearable:!0,"clear-icon":"form__clear",format:"dd-MM-yyyy HH:mm",placeholder:"Введите дату и время"},on:{change:t.setStoreDateFrom},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("div",{staticClass:"additional__date_container"},[a("p",{staticClass:"additional__date_label"},[t._v("По")]),a("el-date-picker",{attrs:{"picker-options":t.optionsDateTo,type:"datetime",editable:"",clearable:!0,"clear-icon":"form__clear",format:"dd-MM-yyyy HH:mm",placeholder:"Введите дату и время"},on:{change:t.setStoreDateTo},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)]),a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Тариф")]),a("el-radio-group",{model:{value:t.radioRateSelected,callback:function(e){t.radioRateSelected=e},expression:"radioRateSelected"}},t._l(t.getRates,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.rateTypeId.name},on:{change:function(a){return t.setStoreRate(e)}}},[t._v(t._s(t.rateRadioLabel(e)))])})),1)],1),a("div",{staticClass:"additional__form_block"},[a("p",{staticClass:"additional__label"},[t._v("Доп услуги")]),a("el-checkbox-group",{staticClass:"additional__checkbox",attrs:{"text-color":"#ffffff"},model:{value:t.addOptions,callback:function(e){t.addOptions=e},expression:"addOptions"}},t._l(t.getOptions,(function(e){return a("el-checkbox",{key:e.name,attrs:{label:e.name},on:{change:function(e){return t.setStoreOptions()}}},[t._v(t._s(t.optionCheckboxLabel(e)))])})),1)],1)]):t._e()])},s=[],r=a("5530"),o=(a("99af"),a("b0c0"),a("4de4"),a("2f62")),n={name:"Additional",data:function(){var t=this;return{radioColorsSelected:"",addOptions:[],radioRateSelected:"",dateTo:"",dateFrom:"",optionsDateFrom:{disabledDate:function(t){return t<(new Date).setHours(0,0,0,0)}},optionsDateTo:{disabledDate:function(e){return e<t.dateFrom}}}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])("model",["getCar"])),Object(o["c"])("additional",["getRates","getOptions","getRate","getPrice","getRentDuration","isPriceValid"])),{},{rateTotal:{get:function(){return this.getPrice},set:function(t){this.setPrice(t)}},rentDuration:{get:function(){return this.getRentDuration},set:function(t){this.setRentDuration(t)}}}),mounted:function(){this.fetchRates()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["b"])("additional",["setPrice","fetchRates","setDateTo","setDateFrom","setColor"])),Object(o["d"])("additional",["setRentDuration","setOption","setRate","setPriceValid"])),{},{setStoreDateTo:function(){this.dateTo||(this.rentDuration=null,this.rateTotal=null),this.setDateTo(this.dateTo),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},setStoreDateFrom:function(){this.dateFrom||(this.rentDuration=null,this.rateTotal=null),this.setDateFrom(this.dateFrom),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},setStoreOptions:function(){this.setOption(this.addOptions),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},setStoreColor:function(t){this.radioColorsSelected=t,this.setColor(t)},setStoreRate:function(t){this.setRate(t),this.radioRateSelected&&this.dateFrom&&this.dateTo&&this.calculateRent()},rateRadioLabel:function(t){return"".concat(t.rateTypeId.name,", ").concat(t.price," ₽/").concat(t.rateTypeId.unit)},optionCheckboxLabel:function(t){return"".concat(t.name,",").concat(t.price,"₽")},calculateRent:function(){var t=0;if(this.getOptions.filter((function(e){!0===e.optValue&&(t+=e.price)})),""!==this.dateFrom&&""!==this.dateTo){var e=this.dateTo-this.dateFrom;if(e<0)this.rateTotal=null,this.rentDuration=null;else switch(this.getRate.rateTypeId.unit){case"сутки":var a=Math.floor(e/1e3/60/60/24);if(0===a&&(a=1),this.rentDuration={units:a,name:"д"},this.rateTotal=a*this.getRate.price+t,this.getCar.priceMin<=this.rateTotal&&this.rateTotal<=this.getCar.priceMax){this.setPriceValid(!0);break}this.setPriceValid(!1);break;case"7 дней":var i=Math.ceil(e/1e3/60/60/24/7);if(this.rentDuration={units:i,name:"нед"},this.rateTotal=i*this.getRate.price+t,this.getCar.priceMin<=this.rateTotal&&this.rateTotal<=this.getCar.priceMax){this.setPriceValid(!0);break}this.setPriceValid(!1);break;case"мин":var s=Math.floor(e/1e3/60);if(this.rentDuration={units:s,name:"мин"},this.rateTotal=s*this.getRate.price+t,this.getCar.priceMin<=this.rateTotal&&this.rateTotal<=this.getCar.priceMax){this.setPriceValid(!0);break}this.setPriceValid(!1);break}}}})},c=n,l=(a("f9ce"),a("2877")),d=Object(l["a"])(c,i,s,!1,null,null,null);e["default"]=d.exports},cf2a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("div",{staticClass:"order__header"},[a("header-app")],1),a("nav",{staticClass:"order__nav"},[t.getConfirmedOrder?a("div",{staticClass:"order__steps"},[a("p",{staticClass:"order__order__number"},[t._v(" Заказ номер "+t._s(t.getConfirmedOrder.id)+" ")])]):a("div",{staticClass:"order__steps"},t._l(t.orderComponents,(function(e){return a("div",{key:e.id,staticClass:"order__step__container"},[a("button",{staticClass:"order__step",class:{order__step_active:e.isActive,order__step_disabled:e.isDisabled,order__step_finished:!e.isDisabled},attrs:{disabled:e.isDisabled},on:{click:function(a){return t.changeCurrentComponent(e)}}},[t._v(" "+t._s(e.tag)+" ")]),a("div",{staticClass:"order__arrow"})])})),0)]),t._l(t.orderComponents,(function(e){return a("div",{key:e.id,staticClass:"order__component_container"},[a("keep-alive",[t.currentComponent.name===e.name?a(e.name,{tag:"component"}):t._e()],1)],1)})),a("price",{directives:[{name:"show",rawName:"v-show",value:t.getWindowWidth>t.tablet,expression:"getWindowWidth > tablet"}]}),t.getWindowWidth<t.tablet?a("i",{staticClass:"el-icon-shopping-cart-1 order__button_price",on:{click:t.showPrice}}):t._e(),a("el-dialog",{attrs:{"show-close":!1,visible:t.isPriceComponentVisible}},[a("price")],1)],2)},s=[],r=a("5530"),o=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order__price"},[a("div",{staticClass:"price__container"},[a("p",{staticClass:"price__title"},[t._v("Ваш заказ:")]),t.getPoint?a("div",{staticClass:"price__menu_step"},[a("p",{staticClass:"price__menu_step__name"},[t._v("Пункт выдачи")]),a("div",{staticClass:"price__dots"}),a("div",{staticClass:"price__menu_step__value"},[t._v(" "+t._s(t.getPoint.cityId.name)+","),a("br"),t._v(t._s(t.getPoint.address)+" ")])]):t._e(),t.getCar?a("div",{staticClass:"price__menu_step"},[a("p",{staticClass:"price__menu_step__name"},[t._v("Модель")]),a("div",{staticClass:"price__dots"}),a("div",{staticClass:"price__menu_step__value"},[t._v(" "+t._s(t.getCar.name)+" ")])]):t._e(),t.getColor?a("div",{staticClass:"price__menu_step"},[a("p",{staticClass:"price__menu_step__name"},[t._v("Цвет")]),a("div",{staticClass:"price__dots"}),a("div",{staticClass:"price__menu_step__value"},[t._v(" "+t._s(t.getColor)+" ")])]):t._e(),t.getRentDuration?a("div",{staticClass:"price__menu_step"},[a("p",{staticClass:"price__menu_step__name"},[t._v("Длительность аренды")]),a("div",{staticClass:"price__dots"}),a("div",{staticClass:"price__menu_step__value"},[t._v(" "+t._s(t.getRentDuration.units)+t._s(t.getRentDuration.name)+" ")])]):t._e(),t.getRate?a("div",{staticClass:"price__menu_step"},[a("p",{staticClass:"price__menu_step__name"},[t._v("Тариф")]),a("div",{staticClass:"price__dots"}),a("div",{staticClass:"price__menu_step__value"},[t._v(t._s(t.getRate.rateTypeId.name))])]):t._e(),t._l(t.getOptions,(function(e){return a("div",{key:e.name},[e.optValue?a("div",{staticClass:"price__menu_step"},[a("p",{staticClass:"price__menu_step__name"},[t._v(t._s(e.name))]),a("div",{staticClass:"price__dots"}),a("div",{staticClass:"price__menu_step__value"},[t._v("Да")])]):t._e()])})),t.getCar?a("div",{staticClass:"price__total"},[t.getPrice&&!t.isPriceValid?a("div",{staticClass:"price__total_error"},[a("b",[t._v("Цена ")]),t._v("для Вашей машины должна быть в диапазоне от "+t._s(t.getCar.priceMin)+" ₽ до "+t._s(t.getCar.priceMax)+" ₽. Текущая цена "+t._s(t.getPrice)+" ₽ ")]):t.getPrice&&t.isPriceValid?a("div",[a("b",[t._v("Цена:")]),t._v(t._s(t.getPrice)+" ₽ ")]):a("div",[a("b",[t._v("Цена:")]),t._v(" от"+t._s(t.getCar.priceMin)+" до "+t._s(t.getCar.priceMax)+" ₽ ")])]):t._e(),t.getConfirmedOrder?a("button",{staticClass:"price__button price__button_cancel",on:{click:t.reset}},[t._v(" Отменить ")]):a("button",{staticClass:"price__button",class:t.buttonClass,attrs:{disabled:t.buttonActive},on:{click:t.toNextComp}},[t._v(" "+t._s(t.currentComponent.buttonText)+" ")]),a("dialog-app")],2)])}),n=[],c=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.isDialogVisible,width:"40%","show-close":!1,center:"",modal:!1}},[a("p",{staticClass:"dialog__text"},[t._v("Подтвердить заказ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"dialog__button_confirm dialog__button_text",on:{click:t.confirm}},[t._v("Подтвердить")]),a("button",{staticClass:"dialog__button_close dialog__button_text",on:{click:t.close}},[t._v("Вернуться")])])])},d=[],_={name:"DialogApp",computed:Object(r["a"])({},Object(c["c"])("shared",["isDialogVisible"])),methods:{close:function(){this.$store.dispatch("shared/setDialogStatus",!1)},confirm:function(){this.$store.dispatch("total/pushOrder"),this.$store.dispatch("shared/setDialogStatus",!1)}}},u=_,p=(a("1364"),a("2877")),m=Object(p["a"])(u,l,d,!1,null,null,null),h=m.exports,f={name:"Price",components:{DialogApp:h},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])("order",["getCity","getPoint","getPoints"])),Object(c["c"])("model",["getCar"])),Object(c["c"])("shared",["currentComponent","orderComponents","getWindowWidth","tablet"])),Object(c["c"])("additional",["getRentDuration","getRate","getOptions","getPrice","getColor","isPriceValid"])),Object(c["c"])("total",["getConfirmedOrder"])),{},{buttonActive:function(){return 4===this.currentComponent.id?this.currentComponent.isDisabled:this.orderComponents[this.currentComponent.id].isDisabled},buttonClass:function(){return 4===this.currentComponent.id?{price__button_disabled:this.currentComponent.isDisabled}:{price__button_disabled:this.orderComponents[this.currentComponent.id].isDisabled}}}),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["d"])("shared",["toNextStep","invertPriceVisible"])),Object(c["b"])("total",["clearConfirmedOrder"])),{},{toNextComp:function(){this.toNextStep(),this.getWindowWidth<=this.tablet&&this.invertPriceVisible()},reset:function(){this.clearConfirmedOrder()}})},C=f,b=(a("465f"),Object(p["a"])(C,o,n,!1,null,"06341e60",null)),g=b.exports,v=a("4319"),O=a("9925"),j=a("a842"),k=a("a63c"),S=a("61c9"),D={name:"Order",components:{Price:g,Location:v["default"],Additional:j["default"],Model:O["default"],Total:k["default"],HeaderApp:S["a"]},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])("shared",["orderComponents","currentComponent","getWindowWidth","getWindowWidth","tablet","isPriceComponentVisible"])),Object(c["c"])("order",["getLocationStatus"])),Object(c["c"])("model",["getModelStatus"])),Object(c["c"])("additional",["getAdditionalStatus"])),Object(c["c"])("total",["getConfirmedOrder"])),watch:{getLocationStatus:function(t){this.setComponentStatus(t)},getModelStatus:function(t){this.setComponentStatus(t)},getAdditionalStatus:function(t){this.setComponentStatus(t)}},mounted:function(){this.fetchOrderStatus()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({showPrice:function(){this.invertPriceVisible()}},Object(c["d"])("shared",["setComponentStatus","setCurrentComponent","invertPriceVisible"])),Object(c["b"])("total",["fetchOrderStatus"])),{},{changeCurrentComponent:function(t){this.setCurrentComponent(t),this.$router.push(t.name.toLowerCase())}})},T=D,R=(a("d7fa"),Object(p["a"])(T,i,s,!1,null,"41ddaa57",null));e["default"]=R.exports},d7fa:function(t,e,a){"use strict";a("35aa")},f9ce:function(t,e,a){"use strict";a("7197")}}]);
//# sourceMappingURL=chunk-504c9ad4.7fc665bb.js.map